@model Universal.EBI.MVC.Models.ClassroomViewModel
@using Universal.EBI.MVC.Models
@using Universal.EBI.MVC.Extensions

@{
    var modelPaged = TempDataExtension.Get<PagedResult<EducatorClassroomViewModel>>(TempData, "Educators");
    ViewData["Title"] = "Criar Sala de Aula";
    //Layout = "";
}

<div class="row col-md-12 mt-md-3">
    <div class="col-md-6"><h5>@ViewData["Title"]</h5></div>
    <div class="col-md-6 text-end"><a asp-action="GetClassrooms">Back to List</a></div>
</div>

<hr />

<div class="row">
    <div class="col-md-6">
        <div class="card">
            <div class="card-body">
                <form class="g-4" asp-controller="Classroom" asp-action="GetEducators" method="get">
                    <div class="row text-center">
                        <div class="col-md-9">
                            <div class="input-group form-outline">
                                <input type="text" class="form-control" id="q" name="q" aria-describedby="inputGroupPrepend1" />
                                <label for="q" class="form-label">Buscar educador por nome</label>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-primary" type="submit">Buscar</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card">
            <div class="card-body">
                <form class="g-4" asp-controller="Educator" asp-action="GetEducators" method="get">
                    <div class="row text-center">
                        <div class="col-md-9">
                            <div class="input-group form-outline">
                                <input type="text" class="form-control" id="search" aria-describedby="inputGroupPrepend2" />
                                <label for="search" class="form-label">Buscar educador por código</label>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-primary" type="button">Buscar</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="col-md-12 mt-md-3">
    <div class="card col-md-12">
        <form class="row g-4" asp-controller="Classroom" asp-action="Create" method="post">
            <div class="card-body">
                <div class="card-text">
                    <div>
                        <div>
                            <div class="accordion" id="accordionExample">
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="headingOne">
                                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                            Sala de Aula
                                        </button>
                                    </h2>
                                    <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                                        <div class="accordion-body">
                                            <div class="row col-md-12">
                                                <div class="col-md-3">
                                                    <div class="input-group form-outline">
                                                        <input asp-for="@Model.Region" class="form-control" id="region" value="" required />
                                                        <label for="region" class="form-label">Região</label>
                                                    </div>
                                                    <div>
                                                        <span asp-validation-for="@Model.Region" class="text-danger"></span>
                                                    </div>
                                                </div>
                                                <div class="col-md-3">
                                                    <div class="input-group form-outline">
                                                        <input asp-for="@Model.Church" class="form-control" id="church" value="" required />
                                                        <label for="church" class="form-label">Igreja</label>
                                                    </div>
                                                    <div>
                                                        <span asp-validation-for="@Model.Church" class="text-danger"></span>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="input-group form-outline">
                                                        <input asp-for="@Model.Lunch" class="form-control" id="lunch" value="" />
                                                        <label for="lunch" class="form-label">Lanche</label>
                                                    </div>
                                                    <div>
                                                        <span asp-validation-for="@Model.Lunch" class="text-danger"></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row col-md-12">
                                                <div class="col-md-3 mt-md-4">
                                                    <div class="input-group">
                                                        <label class="input-group-text" for="inputGroupSelect01">Tipo de Sala</label>
                                                        <select asp-for="@Model.ClassroomType" class="form-select" id="inputGroupSelect01" required>
                                                            <option selected>Selecione...</option>
                                                            <option value="Nursery">Berçário</option>
                                                            <option value="Maternal">Maternal</option>
                                                            <option value="Primary">Primário</option>
                                                            <option value="Juniors">Juniores</option>
                                                            <option value="Mixed">Mista</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-9 mt-md-4">
                                                    <div class="p-md-2">
                                                        <div class="form-check form-check-inline">
                                                            <label class="mb-2" for="flexRadioDefault">Horário</label>
                                                        </div>
                                                        <div class="form-check form-check-inline">
                                                            <input class="form-check-input" type="radio" asp-for="@Model.MeetingTime" id="inlineRadio1" value="7:00H">
                                                            <label class="form-check-label" for="inlineRadio1">7:00H</label>
                                                        </div>
                                                        <div class="form-check form-check-inline">
                                                            <input class="form-check-input" type="radio" asp-for="@Model.MeetingTime" id="inlineRadio2" value="10:00H">
                                                            <label class="form-check-label" for="inlineRadio2">10:00H</label>
                                                        </div>
                                                        <div class="form-check form-check-inline">
                                                            <input class="form-check-input" type="radio" asp-for="@Model.MeetingTime" id="inlineRadio3" value="15:00H">
                                                            <label class="form-check-label" for="inlineRadio3">15:00H</label>
                                                        </div>
                                                        <div class="me-5 form-check form-check-inline">
                                                            <input class="form-check-input" type="radio" asp-for="@Model.MeetingTime" id="inlineRadio4" value="19:30H">
                                                            <label class="form-check-label" for="inlineRadio4">19:30H</label>
                                                        </div>
                                                        <div class="col-md-0 form-check-inline">
                                                            <label class="mb-2" for="flexRadioDefault">Situação da Sala</label>
                                                        </div>
                                                        <div class="form-check form-switch form-check-inline">
                                                            <input class="form-check-input" type="checkbox" asp-for="@Model.Actived" id="flexSwitchCheckDefault">
                                                            <label class="form-check-label" for="flexSwitchCheckDefault">Ativa</label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="headingTwo">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                            Educador
                                        </button>
                                    </h2>
                                    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                                        <div class="accordion-body">
                                            <div class="table-responsive">
                                                <table id="tblEducators" class="table table-striped table-hover" style="width:100%">
                                                    <thead class="table-dark">
                                                        <tr>
                                                            <th></th>
                                                            <th>
                                                                <strong>Foto</strong>
                                                            </th>
                                                            <th>
                                                                <strong>ID</strong>
                                                            </th>
                                                            <th>
                                                                <strong>Nome</strong>
                                                            </th>
                                                            <th>
                                                                <strong>Sobrenome</strong>
                                                            </th>
                                                            <th>
                                                                <strong>Função</strong>
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        @if (modelPaged != null && modelPaged.List.ToList().Count > 0)
                                                        {
                                                            @foreach (var educator in modelPaged.List.ToList().OrderBy(e => e.FirstName))
                                                            {
                                                                var i = 0;
                                                                <tr>
                                                                    <th scope="row">
                                                                        <div class="form-check">
                                                                            <input class="form-check-input"
                                                                                   type="radio"
                                                                                   value=""
                                                                                   id="flexCheckDefault-@i"
                                                                                   name="flexCheckDefault"
                                                                                   onclick="seedFields()" />
                                                                        </div>
                                                                    </th>
                                                                    <td class="cellEducators">
                                                                        @educator.PhotoUrl
                                                                    </td>
                                                                    <td class="cellEducators">
                                                                        @educator.Id
                                                                    </td>
                                                                    <td class="cellEducators">
                                                                        @educator.FirstName
                                                                    </td>
                                                                    <td class="cellEducators">
                                                                        @educator.LastName
                                                                    </td>
                                                                    <td class="cellEducators">
                                                                        @educator.FunctionType
                                                                    </td>
                                                                </tr>
                                                                i = i + 1;
                                                            }
                                                        }
                                                    </tbody>
                                                </table>
                                                @if (modelPaged == null || modelPaged.List.ToList().Count == 0)
                                                {
                                                    <div class="table-light text-center p-md-2">
                                                        <strong>Não existem dados para exibição.</strong>
                                                    </div>
                                                }
                                            </div>

                                            <vc:paginacao model-paged="@modelPaged"></vc:paginacao>
                                            <div>
                                                <input id="educatorId" asp-for="Educator.Id" type="hidden" value="" />
                                            </div>
                                            <div class="row col-md-12 mt-md-3">
                                                <div class="col-md-4">
                                                    <div class="input-group form-outline">
                                                        <input asp-for="Educator.FirstName" class="form-control" id="educatorFirstname" aria-describedby="inputGroupPrepend3" value="" required />
                                                        <label for="educatorFirstname" class="form-label">Primeiro nome</label>
                                                    </div>
                                                    <div>
                                                        <span asp-validation-for="Educator.FirstName" class="text-danger"></span>
                                                    </div>
                                                </div>
                                                <div class="col-md-5">
                                                    <div class="input-group form-outline">

                                                        <input asp-for="Educator.LastName" class="form-control" id="educatorLastname" value="" required />
                                                        <label for="educatorLastname" class="form-label">Sobrenome</label>
                                                    </div>
                                                    <div>
                                                        <span asp-validation-for="Educator.LastName" class="text-danger"></span>
                                                    </div>
                                                </div>
                                                <div class="col-md-3">
                                                    <div class="input-group">
                                                        <label class="input-group-text" for="inputGroupSelect02">Função</label>
                                                        <select asp-for="Educator.FunctionType" class="form-select" id="inputGroupSelect02" required>
                                                            <option selected>Selecione...</option>
                                                            <option value="Responsible">Responsável</option>
                                                            <option value="Auxiliary">Auxiliar</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="d-flex align-items-center justify-content-center mt-md-0 mb-md-3">
                <button class="btn btn-primary col-md-3 me-md-3" type="submit">Criar Sala</button>
            </div>
        </form>
    </div>
</div>

@*<script>
    $(function () {
    $('#datepicker4').datepicker({ format: 'dd/mm/yyyy' });
    });

    $(function () {
    $('#datepicker5').datepicker({ format: 'dd/mm/yyyy' });
    });

    $(function () {
    $('#datepicker6').datepicker({ format: 'dd/mm/yyyy' });
    });

    </script>*@

@*<script>
    $(function () {
    var table = $('#example').DataTable({
    lengthChange: false,

    });

    });

    $(function () {
    var table = $('#example1').DataTable({
    lengthChange: false,

    });
    });

    $(function () {
    var table = $('#example2').DataTable({
    lengthChange: false,

    });
    });

    $(document).ready(function(){

    // code to read selected table row cell data (values).
    $("#tblEducator").on('click','#flexCheckDefault',function(){
    // get the current row
    var currentRow=$(this).closest("tr");

    var col1=currentRow.find("td:eq(0)").text(); // get current row 1st TD value
    var col2=currentRow.find("td:eq(1)").text(); // get current row 2nd TD
    var col3=currentRow.find("td:eq(4)").text(); // get current row 3rd TD
    var data=col1+"\n"+col2+"\n"+col3;
    alert(data);
    $("#txtEducatorId").val = col1;
    $("#firstname").val = col2;
    $('#inputGroupSelect05 option[value="${col3}"]').attr('selected','selected')
    });

    });
    </script>*@

<script>
    function seedFields() {

        $('#tblEducators tr').each(function () {

            var educatorId = $(this).find("td").eq(1).text();
            educatorId = $.trim(educatorId);
            console.log(educatorId)
            $('#educatorId').val(educatorId);

            var educatorFirstname = $(this).find("td").eq(2).text();
            educatorFirstname = $.trim(educatorFirstname);
            $('#educatorFirstname').val(educatorFirstname);
            $('#educatorFirstname').addClass("active");

            var educatorLastname = $(this).find("td").eq(3).text();
            educatorLastname = $.trim(educatorLastname);
            $('#educatorLastname').val(educatorLastname);
            $('#educatorLastname').addClass("active");

            var functionType = $(this).find("td").eq(4).text();
            functionType = $.trim(functionType);
            $('#inputGroupSelect02').val(functionType);

            //alert(firstname + ' ' + lastname + ' ' + functionType);
        });

    }
</script>

<!-- MDB -->
<script src="~/mdb5-ui-kit/js/mdb.min.js"></script>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
